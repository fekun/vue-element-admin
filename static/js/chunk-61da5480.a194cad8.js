(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61da5480"],{"0345":function(t,e,n){},2423:function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return p}),n.d(e,"a",function(){return u}),n.d(e,"e",function(){return m});n("b775");var a=n("96eb"),s=n.n(a);const l=[],i=100,o='<p>I am testing data, I am testing data.</p><p><img src="https://wpimg.wallstcn.com/4c69009c-0fd4-4153-b112-6cb53d1cf943"></p>',r="https://wpimg.wallstcn.com/e4558086-631c-425c-9430-56ffb46e70b3";for(let g=0;g<i;g++)l.push(s.a.mock({id:"@increment",timestamp:+s.a.Random.date("T"),author:"@first",reviewer:"@first",title:"@title(5, 10)",content_short:"mock data",content:o,forecast:"@float(0, 100, 2, 2)",importance:"@integer(1, 3)","type|1":["CN","US","JP","EU"],"status|1":["published","draft","deleted"],display_time:"@datetime",comment_disabled:!0,pageviews:"@integer(300, 5000)",image_uri:r,platforms:["a-platform"]}));function c(t){return new Promise((t,e)=>{const n=1,a=20;let s=l.filter(t=>{return!0});const i=s.filter((t,e)=>e<a*n&&e>=a*(n-1));t({code:2e4,data:{total:s.length,items:i}})})}function d(t){return new Promise((e,n)=>{for(const a of l)a.id===+t&&e({code:2e4,data:a})})}function p(t){return new Promise((t,e)=>{t({code:2e4,data:{pvData:[{key:"PC",pv:1024},{key:"mobile",pv:1024},{key:"ios",pv:1024},{key:"android",pv:1024}]}})})}function u(t){return new Promise((t,e)=>{t({code:2e4,data:"success"})})}function m(t){return new Promise((t,e)=>{t({code:2e4,data:"success"})})}},"74b3":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":"id",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"180px",align:"center",label:"Date"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("parseTime")(e.row.timestamp,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"300px",label:"Title"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"110px",align:"center",label:"Author"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"100px",label:"Importance"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(+e.row.importance,function(t){return n("svg-icon",{key:t,staticClass:"icon-star",attrs:{"icon-class":"star"}})})}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"Readings",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.pageviews))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"Status",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tag",{attrs:{type:t._f("statusFilter")(a.status)}},[t._v("\n          "+t._s(a.status)+"\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"Drag",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("svg-icon",{staticClass:"drag-handler",attrs:{"icon-class":"drag"}})]}}])})],1),t._v(" "),n("div",{staticClass:"show-d"},[n("el-tag",{staticStyle:{"margin-right":"12px"}},[t._v("\n      "+t._s(t.$t("table.dragTips1"))+" :\n    ")]),t._v("\n    "+t._s(t.oldList)+"\n  ")],1),t._v(" "),n("div",{staticClass:"show-d"},[n("el-tag",[t._v(t._s(t.$t("table.dragTips2"))+" :")]),t._v(" "+t._s(t.newList)+"\n  ")],1),t._v(" "),n("ClipBoard",{attrs:{code:t.code,"related-link":t.relatedLink}})],1)},s=[],l=n("1da1"),i=n("2423"),o=n("53fe"),r=n.n(o),c=n("1fb2"),d={name:"DragTable",filters:{statusFilter(t){const e={published:"success",draft:"info",deleted:"danger"};return e[t]}},components:{ClipBoard:c["a"]},data(){return{list:null,total:null,listLoading:!0,listQuery:{page:1,limit:10},sortable:null,oldList:[],newList:[],relatedLink:[{title:"@/api/article",link:"https://github.com/PanJiaChen/vue-element-admin/blob/master/src/api/article.js"}],code:'\n<template>\n  <div class="app-container">\n    \x3c!-- Note that row-key is necessary to get a correct row order. --\x3e\n    <el-table\n      ref="dragTable"\n      v-loading="listLoading"\n      :data="list"\n      row-key="id"\n      border\n      fit\n      highlight-current-row\n      style="width: 100%"\n    >\n      <el-table-column\n        align="center"\n        label="ID"\n        width="65"\n      >\n        <template slot-scope="scope">\n          <span>{{ scope.row.id }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        width="180px"\n        align="center"\n        label="Date"\n      >\n        <template slot-scope="scope">\n          <span>{{ scope.row.timestamp | parseTime(\'{y}-{m}-{d} {h}:{i}\') }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        min-width="300px"\n        label="Title"\n      >\n        <template slot-scope="scope">\n          <span>{{ scope.row.title }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        width="110px"\n        align="center"\n        label="Author"\n      >\n        <template slot-scope="scope">\n          <span>{{ scope.row.author }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        width="100px"\n        label="Importance"\n      >\n        <template slot-scope="scope">\n          <svg-icon\n            v-for="n in +scope.row.importance"\n            :key="n"\n            icon-class="star"\n            class="icon-star"\n          />\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        align="center"\n        label="Readings"\n        width="95"\n      >\n        <template slot-scope="scope">\n          <span>{{ scope.row.pageviews }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        class-name="status-col"\n        label="Status"\n        width="110"\n      >\n        <template slot-scope="{row}">\n          <el-tag :type="row.status | statusFilter">\n            {{ row.status }}\n          </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        align="center"\n        label="Drag"\n        width="80"\n      >\n        <template slot-scope="{}">\n          <svg-icon\n            class="drag-handler"\n            icon-class="drag"\n          />\n        </template>\n      </el-table-column>\n    </el-table>\n    \x3c!-- $t is vue-i18n global function to translate lang (lang in @/lang)  --\x3e\n    <div class="show-d">\n      <el-tag style="margin-right:12px;">\n        {{ $t(\'table.dragTips1\') }} :\n      </el-tag>\n      {{ oldList }}\n    </div>\n    <div class="show-d">\n      <el-tag>{{ $t(\'table.dragTips2\') }} :</el-tag> {{ newList }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fetchList } from \'@/api/article\'\nimport Sortable from \'sortablejs\'\n\nexport default {\n  name: \'DragTable\',\n  filters: {\n    statusFilter (status) {\n      const statusMap = {\n        published: \'success\',\n        draft: \'info\',\n        deleted: \'danger\'\n      }\n      return statusMap[status]\n    }\n  },\n  data () {\n    return {\n      list: null,\n      total: null,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 10\n      },\n      sortable: null,\n      oldList: [],\n      newList: []\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    async getList () {\n      this.listLoading = true\n      const { data } = await fetchList(this.listQuery)\n      this.list = data.items\n      this.total = data.total\n      this.listLoading = false\n      this.oldList = this.list.map(v => v.id)\n      this.newList = this.oldList.slice()\n      this.$nextTick(() => {\n        this.setSort()\n      })\n    },\n    setSort () {\n      const el = this.$refs.dragTable.$el.querySelectorAll(\'.el-table__body-wrapper > table > tbody\')[0]\n      this.sortable = Sortable.create(el, {\n        ghostClass: \'sortable-ghost\', // Class name for the drop placeholder,\n        setData: function (dataTransfer) {\n          // to avoid Firefox bug\n          // Detail see : https://github.com/RubaXa/Sortable/issues/1012\n          dataTransfer.setData(\'Text\', \'\')\n        },\n        onEnd: evt => {\n          const targetRow = this.list.splice(evt.oldIndex, 1)[0]\n          this.list.splice(evt.newIndex, 0, targetRow)\n\n          // for show the changes, you can delete in you code\n          const tempIndex = this.newList.splice(evt.oldIndex, 1)[0]\n          this.newList.splice(evt.newIndex, 0, tempIndex)\n        }\n      })\n    }\n  }\n}\n<//script>\n\n<style>\n.sortable-ghost{\n  opacity: .8;\n  color: #fff!important;\n  background: #42b983!important;\n}\n</style>\n\n<style scoped>\n.icon-star{\n  margin-right:2px;\n}\n.drag-handler{\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n.show-d{\n  margin-top: 15px;\n}\n</style>\n\n      '}},created(){this.getList()},methods:{getList(){var t=this;return Object(l["a"])(function*(){t.listLoading=!0;const e=yield Object(i["c"])(t.listQuery),n=e.data;t.list=n.items,t.total=n.total,t.listLoading=!1,t.oldList=t.list.map(t=>t.id),t.newList=t.oldList.slice(),t.$nextTick(()=>{t.setSort()})})()},setSort(){const t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=r.a.create(t,{ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onEnd:t=>{const e=this.list.splice(t.oldIndex,1)[0];this.list.splice(t.newIndex,0,e);const n=this.newList.splice(t.oldIndex,1)[0];this.newList.splice(t.newIndex,0,n)}})}}},p=d,u=(n("775f"),n("91ac"),n("2877")),m=Object(u["a"])(p,a,s,!1,null,"2003d790",null);e["default"]=m.exports},"775f":function(t,e,n){"use strict";var a=n("edd0"),s=n.n(a);s.a},"91ac":function(t,e,n){"use strict";var a=n("0345"),s=n.n(a);s.a},edd0:function(t,e,n){}}]);